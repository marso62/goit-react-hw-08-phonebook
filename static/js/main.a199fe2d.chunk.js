(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){"use strict";n.r(t);var r,c,a,u,o,s,i=n(0),l=n.n(i),b=n(21),f=n.n(b),g=n(13),j=n(46),O=n(30),d=n(31),m=n(33),h=n(32),p=n(15),E=n(6),v=n(36),C=n.n(v),S=(n(49),[{path:"/login",label:"Login",exact:!0,component:Object(i.lazy)((function(){return n.e(5).then(n.bind(null,110))})),private:!1,restricted:!0},{path:"/register",label:"Register",exact:!0,component:Object(i.lazy)((function(){return n.e(6).then(n.bind(null,111))})),private:!1,restricted:!0},{path:"/contacts",label:"Contacts",exact:!0,component:Object(i.lazy)((function(){return Promise.all([n.e(4),n.e(3)]).then(n.bind(null,112))})),private:!0,restricted:!1}]),k=n(25),y=function(e){return e.auth.token},R=function(e){return e.auth.user.name},q=function(e){return e.auth.loadingUser},U=Object(g.b)((function(e){return{isAuthenticated:y(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,r=e.restricted,c=Object(k.a)(e,["component","isAuthenticated","restricted"]);return l.a.createElement(E.b,Object.assign({},c,{render:function(e){return n&&r?l.a.createElement(E.a,{to:"/contacts"}):l.a.createElement(t,e)}}))})),w=Object(g.b)((function(e){return{isAuthenticated:y(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,r=Object(k.a)(e,["component","isAuthenticated"]);return l.a.createElement(E.b,Object.assign({},r,{render:function(e){return n?l.a.createElement(t,e):l.a.createElement(E.a,{to:"/login"})}}))})),N=S.map((function(e){return e.path})),x=S.map((function(e){return e.label})),A=Object(g.b)((function(e){return{isAuthenticated:y(e)}}))((function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("ul",{className:"Navigation_log-reg"},l.a.createElement("li",null,l.a.createElement(p.b,{to:N[0],className:"Navigation-link",activeClassName:"Navigation-link-active"},x[0])),l.a.createElement("li",null,l.a.createElement(p.b,{to:N[1],className:"Navigation-link",activeClassName:"Navigation-link-active"},x[1]))))})),L=n(22),z=Object(g.b)((function(e){return{name:R(e)}}),{onLogout:L.a.logout})((function(e){var t=e.name,n=e.onLogout;return l.a.createElement("div",{className:"userMenu"},l.a.createElement("p",null,"Welcome, ",t," !!!"),l.a.createElement("button",{type:"submit",onClick:n},"Logout"))})),F=(n(97),function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){var e=this.props,t=e.isLogin,n=e.isUserLoading;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,null,l.a.createElement("div",{className:"Navigation"},t&&l.a.createElement(p.b,{to:"/contacts",className:"Contacts_title"},"Contacts"),l.a.createElement("div",null),l.a.createElement("div",null,t&&!n?l.a.createElement(z,null):l.a.createElement(A,null))),l.a.createElement(i.Suspense,{fallback:l.a.createElement(C.a,{type:"ThreeDots",color:"#f5f505",height:50,width:100,timeout:3e3})},l.a.createElement(E.d,null,S.map((function(e){return e.private?l.a.createElement(w,Object.assign({key:e.path},e)):l.a.createElement(U,Object.assign({key:e.path},e,{restricted:e.restricted}))}))))))}}]),n}(i.Component)),B=Object(g.b)((function(e){return{isLogin:y(e),isUserLoading:q(e)}}),{onGetCurrentUser:L.a.getCurrentUser})(F),D=n(3),G=n(17),J=n(47),M=n.n(J),_=n(1),I=n(48),P=n(7),T=n(9),W=Object(D.c)([],(r={},Object(_.a)(r,T.a.fetchContactsSuccess,(function(e,t){return t.payload})),Object(_.a)(r,T.a.addContactsSuccess,(function(e,t){return[t.payload].concat(Object(I.a)(e))})),Object(_.a)(r,T.a.removeContactsSuccess,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),r)),H=Object(D.c)("",Object(_.a)({},T.a.changeFilter,(function(e,t){return t.payload}))),K=Object(D.c)(!1,(c={},Object(_.a)(c,T.a.fetchContactsRequest,(function(){return!0})),Object(_.a)(c,T.a.fetchContactsSuccess,(function(){return!1})),Object(_.a)(c,T.a.fetchContactsError,(function(){return!1})),Object(_.a)(c,T.a.addContactsRequest,(function(){return!0})),Object(_.a)(c,T.a.addContactsSuccess,(function(){return!1})),Object(_.a)(c,T.a.addContactsError,(function(){return!1})),Object(_.a)(c,T.a.removeContactsRequest,(function(){return!0})),Object(_.a)(c,T.a.removeContactsSuccess,(function(){return!1})),Object(_.a)(c,T.a.removeContactsError,(function(){return!1})),c)),Q=Object(P.c)({items:W,filter:H,loading:K}),V=n(2),X={name:null,email:null},Y=Object(D.c)(X,(a={},Object(_.a)(a,V.a.registerSuccess,(function(e,t){return t.payload.user})),Object(_.a)(a,V.a.loginSuccess,(function(e,t){return t.payload.user})),Object(_.a)(a,V.a.logoutSuccess,(function(){return X})),Object(_.a)(a,V.a.getCurrentUserSuccess,(function(e,t){return t.payload})),a)),Z=Object(D.c)(null,(u={},Object(_.a)(u,V.a.registerSuccess,(function(e,t){return t.payload.token})),Object(_.a)(u,V.a.loginSuccess,(function(e,t){return t.payload.token})),Object(_.a)(u,V.a.logoutSuccess,(function(){return null})),u)),$=Object(D.c)(null,(o={},Object(_.a)(o,V.a.registerError,(function(e,t){return t.payload})),Object(_.a)(o,V.a.loginError,(function(e,t){return t.payload})),Object(_.a)(o,V.a.logoutError,(function(e,t){return t.payload})),Object(_.a)(o,V.a.getCurrentUserError,(function(e,t){return t.payload})),o)),ee=Object(D.c)(!1,(s={},Object(_.a)(s,V.a.registerRequest,(function(){return!0})),Object(_.a)(s,V.a.registerSuccess,(function(){return!1})),Object(_.a)(s,V.a.registerError,(function(){return!1})),Object(_.a)(s,V.a.loginRequest,(function(){return!0})),Object(_.a)(s,V.a.loginSuccess,(function(){return!1})),Object(_.a)(s,V.a.loginError,(function(){return!1})),Object(_.a)(s,V.a.logoutRequest,(function(){return!0})),Object(_.a)(s,V.a.logoutSuccess,(function(){return!1})),Object(_.a)(s,V.a.logoutError,(function(){return!1})),Object(_.a)(s,V.a.getCurrentUserRequest,(function(){return!0})),Object(_.a)(s,V.a.getCurrentUserSuccess,(function(){return!1})),Object(_.a)(s,V.a.getCurrentUserError,(function(){return!1})),s)),te=Object(P.c)({user:Y,token:Z,error:$,loadingUser:ee}),ne={key:"auth",storage:M.a,whitelist:["token"]},re=Object(D.a)({reducer:{contacts:Q,auth:Object(G.g)(ne,te)},middleware:Object(D.d)({serializableCheck:{ignoredActions:[G.a,G.f,G.b,G.c,G.d,G.e]}})}),ce=Object(G.h)(re);n(100);f.a.render(l.a.createElement(g.a,{store:re},l.a.createElement(j.a,{loading:null,persistor:ce},l.a.createElement(B,null))),document.getElementById("root"))},2:function(e,t,n){"use strict";var r=n(3),c=Object(r.b)("auth/registerRequest"),a=Object(r.b)("auth/registerSuccess"),u=Object(r.b)("auth/registerError"),o=Object(r.b)("auth/loginRequest"),s=Object(r.b)("auth/loginSuccess"),i=Object(r.b)("auth/loginError"),l=Object(r.b)("auth/logoutRequest"),b=Object(r.b)("auth/logoutSuccess"),f=Object(r.b)("auth/logoutError"),g=Object(r.b)("auth/getCurrentUserRequest"),j=Object(r.b)("auth/getCurrentUserSuccess"),O=Object(r.b)("auth/getCurrentUserError");t.a={registerRequest:c,registerSuccess:a,registerError:u,loginRequest:o,loginSuccess:s,loginError:i,logoutRequest:l,logoutSuccess:b,logoutError:f,getCurrentUserRequest:g,getCurrentUserSuccess:j,getCurrentUserError:O}},22:function(e,t,n){"use strict";var r=n(16),c=n.n(r),a=n(20),u=n(18),o=n.n(u),s=n(2);o.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var i=function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(){o.a.defaults.headers.common.Authorization=""};t.a={register:function(e){return function(){var t=Object(a.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(s.a.registerRequest()),t.next=3,o.a.post("/users/signup",e).then((function(e){console.log(e),i(e.data.token),n(s.a.registerSuccess(e.data))})).catch((function(e){return n(s.a.registerError(e.message))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},login:function(e){return function(){var t=Object(a.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(s.a.loginRequest()),t.next=3,o.a.post("/users/login",e).then((function(e){var t=e.data;i(t.token),n(s.a.loginSuccess(t))})).catch((function(e){return n(s.a.loginError(e.message))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(s.a.logoutRequest()),e.next=3,o.a.post("/users/logout").then((function(){l(),t(s.a.logoutSuccess())})).catch((function(e){return t(s.a.logoutError(e.message))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),a=r.auth.token){e.next=3;break}return e.abrupt("return");case 3:return i(a),t(s.a.getCurrentUserRequest()),e.next=7,o.a.get("/users/current").then((function(e){var n=e.data;t(s.a.getCurrentUserSuccess(n))})).catch((function(e){return t(s.a.getCurrentUserError(e.message))}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}},50:function(e,t,n){e.exports=n(101)},9:function(e,t,n){"use strict";var r=n(3),c=Object(r.b)("contacts/fetchRequest"),a=Object(r.b)("contacts/fetchSuccess"),u=Object(r.b)("contacts/fetchError"),o=Object(r.b)("contacts/addRequest"),s=Object(r.b)("contacts/addSuccess"),i=Object(r.b)("contacts/addError"),l=Object(r.b)("contacts/removeRequest"),b=Object(r.b)("contacts/removeSuccess"),f=Object(r.b)("contacts/removeError"),g=Object(r.b)("contact/changeFilter");t.a={fetchContactsRequest:c,fetchContactsSuccess:a,fetchContactsError:u,addContactsRequest:o,addContactsSuccess:s,addContactsError:i,removeContactsRequest:l,removeContactsSuccess:b,removeContactsError:f,changeFilter:g}},97:function(e,t,n){}},[[50,1,2]]]);
//# sourceMappingURL=main.a199fe2d.chunk.js.map